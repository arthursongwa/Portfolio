<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Arthur Songwa - Mes projets</title>
  <link rel="stylesheet" href="style/projects.css">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<style>
  .sidebar {
  width: 16rem; /* 64 */
}
.sidebar.collapsed {
  width: 4rem; /* 16 */
}
</style><style>
  #projectSidebar {
    width: 16rem; /* w-64 */
    transition: width 0.3s ease;
    overflow-y: auto;
  }
  #projectSidebar.collapsed {
    width: 4rem; /* w-16 */
  }
  /* Style projet bouton commun */
  .project-btn {
    min-width: 2rem;
    background-color: #374151; /* bg-gray-700 */
    color: white;
    cursor: pointer;
    border-radius: 0.5rem;
    margin-bottom: 0.75rem;
    text-align: center;
    transition: background-color 0.2s ease, font-size 0.3s ease;
  }
  .project-btn:hover {
    background-color: #3b82f6; /* bg-blue-500 */
  }
  .project-btn.selected {
    background-color: #3b82f6;
  }
</style>
<body class="bg-gray-900 text-white font-mono">
  <div class="flex h-screen">
    <!-- Sidebar -->
    <!-- <aside class="w-64 bg-gray-800 p-5 overflow-y-auto border-r border-gray-700" id="projectSidebar">
      
    </aside> -->
    <aside class="sidebar overflow-hidden bg-gray-800 p-5 overflow-y-auto border-r border-gray-700 transition-all duration-300" id="projectSidebar">
<button id="toggleSidebar" class="mb-4 bg-gray-700 text-white px-2 py-1 w-8 rounded hover:bg-gray-600">
  ←
</button>
    </aside>


    <!-- Detail View -->
    <main class="flex-1 p-10 overflow-y-auto" id="project-detail">
      <div class="w-full h-64 mb-6">
        <img src="img.jpg" alt="Bannière du projet" class="w-full h-full object-cover rounded-xl">
      </div>
      <h2 id="detailTitle" class="text-blue-400 text-2xl font-semibold mb-3">← Sélectionne un projet</h2>
      <p class="description mb-5" id="detailDesc"></p>
      
      <div class="tech-stack mb-5" id="detailTech" class="flex flex-wrap gap-2"></div>

      <div class="images flex flex-wrap gap-4 mb-5" id="detailImages"></div>

      <div class="links flex flex-wrap gap-3" id="detailLinks"></div>

      <a href="index.html" class="inline-block mt-10 text-gray-400 text-sm hover:text-gray-300 cursor-pointer">← Retour</a>
    </main>
  </div>

<script type="module">
  import { projects } from './js/data.js';

  const sidebar = document.getElementById("projectSidebar");
  const detailTitle = document.getElementById("detailTitle");
  const detailDesc = document.getElementById("detailDesc");
  const detailTech = document.getElementById("detailTech");
  const detailImages = document.getElementById("detailImages");
  const detailLinks = document.getElementById("detailLinks");

  let isSidebarExpanded = true;
  let selectedProjectIndex = null;

  // Création du bouton toggle une fois
  const toggleBtn = document.getElementById("toggleSidebar");
  sidebar.appendChild(toggleBtn);

  toggleBtn.addEventListener("click", () => {
    isSidebarExpanded = !isSidebarExpanded;
    sidebar.classList.toggle("collapsed", !isSidebarExpanded);
    toggleBtn.textContent = isSidebarExpanded ? "←" : "→";
    renderProjectButtons();
  });

  function renderProjectButtons() {
    // Supprime tous les boutons sauf le toggle
    [...sidebar.querySelectorAll(".project-btn")].forEach(btn => btn.remove());

    projects.forEach((p, index) => {
      const item = document.createElement("div");
      item.className = "project-btn p-2";

      // Contenu selon sidebar
      item.textContent = isSidebarExpanded ? p.title : p.title.charAt(0);

      // Garde la sélection
      if (selectedProjectIndex === index) {
        item.classList.add("selected");
      }

      item.dataset.index = index;

      item.addEventListener("click", () => {
        // Mise à jour sélection visuelle
        const prevSelected = sidebar.querySelector(".project-btn.selected");
        if (prevSelected) prevSelected.classList.remove("selected");
        item.classList.add("selected");
        selectedProjectIndex = index;

        showProjectDetail(p);
      });

      sidebar.appendChild(item);
    });
  }

  function showProjectDetail(project) {
    detailTitle.textContent = project.title;
    detailDesc.textContent = project.description;

    detailTech.innerHTML = "";
    project.tech.forEach(t => {
      const span = document.createElement("span");
      span.textContent = t;
      span.className = "bg-gray-700 px-3 py-1 rounded text-sm mr-2 mb-2 inline-block";
      detailTech.appendChild(span);
    });

    detailImages.innerHTML = "";
    project.images.forEach(img => {
      const image = document.createElement("img");
      image.src = img;
      image.className = "w-48 h-auto rounded-lg border-2 border-gray-700";
      detailImages.appendChild(image);
    });

    detailLinks.innerHTML = "";
    project.links.forEach(link => {
      const a = document.createElement("a");
      a.href = link.url;
      a.target = "_blank";
      a.textContent = link.name;
      a.className = "bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded text-sm";
      detailLinks.appendChild(a);
    });
  }


  // Initialisation
  sidebar.classList.remove("collapsed");
  renderProjectButtons();
</script>
</body>
</html>
